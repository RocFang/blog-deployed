<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="author" content="strider (方鹏)">
<meta name="description" content="一个伪文青兼程序员的自嗨
    ">
<meta name="keywords" content="博客, 技术, 文学, 电影">
<meta name="referrer" content="always">
<title>sort 命令中 -k、-t 选项的用法 - 纯真年代</title>
<link rel="stylesheet" type="text/css" href="/css/main.css">
<link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
<header>
  <div>
    <h1><a href="https://pureage.info/">纯真年代</a></h1><h2><a href="https://pureage.info/">阅读、体验、沉淀...</a></h2>
  </div>
  <nav><a href="/">博客</a><a href="/tools/">工具</a><a href="/about/">关于</a></nav>
</header>
<main>
  <article>
    <div class="title">
  <h1>sort 命令中 -k、-t 选项的用法</h1>
  </div>
<div class="meta">
  <div>2013-08-05</div>
  <div>
    <span><a href="/tags/%E7%A8%8B%E5%BA%8F%E5%91%98">#程序员</a></span>
    <span><a href="/tags/shell">#shell</a></span>
    </div>
  </div>
<div class="content">
  <h2 id="需求">需求</h2>
<p>假设有个 result_test_upload.log 的文件，里面存放着一些 FastDFS 系统中的 fileid。文本内容如下：</p>
<pre><code>group1/M00/04/08/wKhwglHq1rqAYO2oAAAoAChSBpE0502682  
group2/M00/05/06/wKhwglHq2CGAIs8AAAAoAChSBpE9287977  
......(略）......  
</code></pre><p>如何统计出分配到每个 group 的文件的总和并将其按 group1、group2、group3 的顺序列出来，以方便观察是否所有的 fileid 均匀的分配到 FastDFS 的 group 中？</p>
<h2 id="方法">方法</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat result_test_upload.log  | grep -o group[0-9][0-9]*  | sort -n -t p -k 2| uniq -c  
</code></pre></div><p>其中，<code>grep -o group-0-9][0-9].*</code> 已经把每个 group 名截取出来了，<code>sort -t p</code> 表示以 p 为分隔，<code>-k 2</code> 表示按以 p 为分隔的第二个域来排序，也就是 group1、group2、group3&hellip;中的1、2、3。-n 选项则很简单，表示按照group1、group2、group3&hellip;groupn 的顺序排列。</p>
<p>通过这一行命令，就能得到类似于：</p>
<pre><code>999 group1  
998 group2  
998 group3  
997 group4  
.......  
</code></pre><p>的统计结果了。</p></div>

  </article>
</main>
<footer>
  <div>
    <div>2011-2020 strider. <a href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC-BY-4.0</a><p>Powered by <a href="https://gohugo.io/">Hugo</a> with <a href="https://github.com/yanlinlin82/simple-style">Simple-Style</a></div>
  </div>
</footer>
</body>
</html>
